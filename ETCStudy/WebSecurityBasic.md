### Web 보안
+ 보안 전문가가 되자는건 아니고 기본은 하자는 이야기...
+ OWASP에서 기본 대응책 같은 거 살펴보자.
+ 지금부터 공부하는데 사용할 블로그 - https://b1a423.tistory.com/32?category=690720

### 1. Injection.
#### [1] 뜻
+ 단어의 뜻은 주입.
+ 보편적인 경우는 페이지의 입력 화면에서 악성 코드를 입력하는 것이다.
+ 특히 주로 표적이 되는 것은 SQL이며 SQL만을 노린 공격을 SQL 인젝션이라 부른다. ID, PW 입력창 등에 Sql 코드를 입력하는 방법이 주로 사용된다.
#### [2] 방지법
+ WAF(웹 방화벽) 사용. 
    * WAF는 SQL Injection, XSS 공격, Broken Auth를 노리는 공격 감지 및 차단에 특화된 방화벽이다... 다만 당장 많이 쓰이는 제품들은 구매해야하는 물리적인 장비라는 점이 좀 난점이다.
    * 악성 파일 업로드(???) 공격, 의심스러운 응답 방지(파일 위변조 및 정보 유출) 등에도 효과 있다.
    * https://geekflare.com/open-source-web-application-firewall/ - 일단 무료 제품들... 쓰는 법은 직접 해봐야....
+ 동적 SQL을 사용하지 않음.
    * 정확히는 쿼리 구조가 외부 입력값에 의해 변경되지 않는 API를 사용해야한다.
+ 입력값의 화이트리스트를 엄격하게 설정한다.
+ DB 에러 메시지를 노출하지 않는다.

### 2. 인증 취약점
#### [1] 뜻
+ http://blog.naver.com/PostView.nhn?blogId=is_king&logNo=221591689251&categoryNo=89&parentCategoryNo=0&viewDate=&currentPage=1&postListTopCurrentPage=1&from=postView
+ 패스워드 공격에 대한 문제이다. 가장 단순한 공격으론 무차별 대입 공격이 있다.
+ 패킷을 분석해 로그인 인증상의 취약점을 찾아 공격해온다. 한 가지 경우로 정의하긴 힘든데 얼추 아래와 같은 경우들이 있다.
    * 가능한 모든 비밀번호를 대입하는 식으로 비밀번호를 찾을 수 있는 경우.
    * 방어자가 비밀번호를 String으로 전송받은 뒤 자체 해시를 거쳐 이를 캐시에 넣어 저장한 경우. 해시된 값이 탈취됐다면 같은 유형의 Hash들을 미리 대량 저장해놓은 Lookup table등을 사용해 비밀번호를 찍어맞출 수 있다.
    * 
#### [2] 방지법
+ 해시값이 탈취당한 경우에 대해 (공격자가 비밀번호는 모르나 해시값을 얻어 이를 통해 비밀번호를 유추하려함)
    * Salt를 사용한다. 즉, password를 해시를 하기 전에 랜덤 String 값을 붙여 해시한다.
    * Salt는 보안을 위해 생성한 랜덤 String을 의미하며 Salt를 사용한다는 말은 Salt값을 더해 Hash를 생성하고 그를 활용해 인증하는 모든 경우를 가르킨다.
    * Salt의 길이는 가능한 길 수록 좋다.
    * Salt의 예시 - https://starplatina.tistory.com/entry/%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%ED%95%B4%EC%8B%9C%EC%97%90-%EC%86%8C%EA%B8%88%EC%B9%98%EA%B8%B0-%EB%B0%94%EB%A5%B4%EA%B2%8C-%EC%93%B0%EA%B8%B0
    * 해싱 속도가 느린 해시 함수를 사용한다. 단순히 오래 걸리는 해시를 사용해도 좋고 해시된 값을 다시 해시하는 키 스트레칭도 좋다. 이 떄 N만큼 같은 Hash를 반복하게 하고 N을 랜덤으로 두는 것도 좋음.
+ 무차별 대입에 대해서는 로그인 5회 실패 시 30초간 대기 등의 방법을 사용한다.
+ 추가로 bcrypt가 꽤 괜찮은 해시 함수인듯. bycrupt의 work factor를 검색해 볼 것.

### 3. 민감한 데이터 노출
#### [1] 뜻
+ https://blog.naver.com/PostView.nhn?blogId=is_king&logNo=221651178279&categoryNo=89&parentCategoryNo=0&viewDate=&currentPage=1&postListTopCurrentPage=1&from=search
+ 로그인 데이터를 제외한 중요 데이터들의 관리가 미흡한 경우. 예를 들면 로그인 데이터만을 암호화하고 개인정보는 그대로 전송한다거나 하는 경우, 전송 과정에서 데이터가 스니핑 당할 수 있음을 의미한다.
#### [2] 방지법
+ 가장 좋은건 민감한 정보를 저장하지 않고 전송하지 않는 것이다. 부득이한 경우를 제외하면 전송하지 않고 특히 저장하지 말자. 저장하더라도 세션 쿠키에 저장하자.
+ SSL, HSTS 등을 사용하여 전송을 암호화한다.
+ Base64 인코딩으로 전송한 뒤 복호화한다. Base64는 아스키 코드만으로 데이터를 인코딩하기에 플렛폼 제한이 적다. 물론 단순한 만큼 쉽게 뚫리니 Salt 사용 및 키 스트레칭은 필수다.

### 4. xml 외부 개체 (xxe 공격)
#### [1] 뜻
+ https://wave1994.tistory.com/2
+ 공격자가 xml 문서가 업로드 가능한 사이트에 악의적인 External ENTITY 객체를 포함하는 xml 문서를 업로드한다. Entiry는 공격자가 의도하는 외부 URL을 실행시키며 공격자는 이후 원하는 공격을 수행한다.
+ 공격자는 최종적으론 서비스 거부 공격, 서버의 로컬파일 정보 출력 등을 할 수 있다.
+ Entity란 무엇인가 - http://blog.naver.com/PostView.nhn?blogId=koromoon&logNo=120208853424
#### [2] 방지법
+ https://steemit.com/xxe/@beomps/1-owasp-top-10-2017-xml-xxe
+ JSON 과 같은 덜 복잡한 데이터 형식을 사용한다.
+ XML 프로세서와 라이브러리를 패치한다.
+ 의존성 체커를 사용.... SOAP1.2 이상...?
+ 입력에 화이트리스트를 사용한다. 구현이 힘들어서 그렇지 사실 가장 좋은 방법.
+ 외부 Entity 사용 비활성화.

### 5. 취약한 접근 제어
#### [1] 뜻
+ https://xbb123.tistory.com/160
+ 사용자 권한에 따른 접근 제어가 제대로 이루어지지 않는 것을 의미한다.
+ 주로 아래와 같은 경우이다.
    * 주소에 대한 권한 접근 제어가 제대로 이루어지지 않아 관리자 페이지등을 페이지 주소로 접근 가능한 경우
    * Url이나 특정 자바스크립트의 값 변경으로 다른 사용자의 정보를 탈취할 수 있는 경우.
#### [2] 방지법
+ 기본적으로 페이지는 차단 정책을 통해 운영한다.
+ CORS 사용을 최소화한다.
+ 웹 서버의 디렉토리 리스팅 권한을 false로 설정.
+ 반복적 접근 실패에 대해 적절한 조치를 취해야함.
+ 세션 관련 쿠키 등은 로그아웃 후 모두 지워야하며 서버쪽에서도 무효화 시켜야함.

### 6. 잘못된 보안 구성
#### [1] 뜻
+ 사용 툴의 기본 설정을 그대로 둔 경우. 
+ 웹 서버 디렉토리의 저장 공간에 파일 등을 그대로 둔 경우. 
+ 중요한 에러메시지를 웹브라우저 쿠키등에 그대로 표시하는 경우.
+ 톰캣 등 사용하는 툴에 디폴트 계정이 디폴트 설정대로 살아있는 경우.
+ 시스템 상의 최신 보안 기능 업데이트가 되지 않은 경우.
+ 프레임 워크, DB 등을 관리할 때 보안 설정(IP 대역 등)이 되어있지 않은 경우.
#### [2] 방지법
+ 불필요한 기능, 구성 요소, 문서 등을 최소한으로 해야함.
+ 사용하지 않는 프레임 워크, 기능등을 설치하지 않음.
+ 사용 중인 툴들은 항상 업데이트 최신화를 유지.
+ 가능하다면 접근에 대한 안전한 격리를 구현해야함... 뜻의 이해는 얼추 가는데 설명하긴 힘드네.

### 7. XSS (크로스 사이트 스크립팅)
#### [1] 뜻
+ 페이지의 입력창에 코드를 입력할 시 수행되는 경우. 즉, 게시글 작성 창에 <script>alert(1);</script>을 입력했을 시 alert이 뜨는 경우
+ 위와 같은 입력 취약점을 분석해 게시글을 인터넷에 올린 뒤 사용자가 게시글을 확인하면 쿠키 정보 및 세션 ID를 취득한다.
+ 외부 XML 객체 공격과 비슷한 방식인데 스크립트 버전이라는걸까.
#### [2] 방지법
+ 입력에 대해 화이트리스트의 사용.
+ 입력값 검증.

### 8. 불안전한 역 직렬화
#### [1] 뜻
+ https://shineild-security.tistory.com/15
+ 웹브라우저와 서버가 데이터를 주고받는 과정에서 공격자가 역직렬화 취약점을 공격하는 악성 객체를 보내는 경우.
+ 설명 예시에선 xml을 작성해 java의 ProcessBuilder(cmd를 수행할 수 있게 해주는 객체)를 생성, 역직렬화 이후 명령어가 수행되게 하는 과정을 보여줬다...
#### [2] 방지법
+ xml 사용에 주의하고 취약한 헨들러를 사용하지 않는다....
+ 공격이 상당히 하드코어하게 들어와서 그런가 범용성있는 방지법이 잘 안보인다.

### 9. 알려진 취약점이 있는 컴포넌트 사용
#### [1] 뜻
+ 말 그대로 알려진 취약점이 있는 컴포넌트를 사용하는 경우.
#### [2] 방지법
+ 시스템 구축 시 공신력 있는 매체에서 안전하다 하는 컴포넌트를 선택한다.

### 10. 불충분한 로깅 및 모니터링
#### [1] 뜻
+ 말 그대로 모니터링과 로깅이 충분하지 않은 경우. 클라이언트와의 통신이 보호되고 있는지 충분한 로깅을 거쳐 확인해야한다.
#### [2] 방지법
+ 적절한 로깅 방법을 찾는다.
