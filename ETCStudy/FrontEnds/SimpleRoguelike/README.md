## Tirano Rush 초기 콘셉트
+ webpack + html, vue, scss만 사용해 텍스트 파일 하나 던져주고 그걸 인터넷되는 환경(cdn)에서 html로 저장하기만 하면 바로 수행할 수 있는 게임을 만드는게 처음 잡은 목표다.. 
+ html 파일 한 개로 컨트롤 필요없는 런타임 10분짜리 커피타임 브레이커를 만든다.
+ 구글의 클릭으로 티라노 점프하는 그 미니게임처럼 우리는 오로지 클릭만으로 간단하게 진행하는 로그라이크를 만들자.
+ 보조 컨셉트는 양산형 가챠게임. 10분짜리로 재미를 끌어올리기 위한 전략이다. 평소에 시놉시스를 잡고 그에 맞게 시스템을 생각했다면 이번엔 시놉시스를 시스템에 맞추자. 가챠로 뭘 뽑아야 가챠만으로도 재미가 있을까?

## 러프한 기획
+ 총 5스테이지.
+ 아주 심플하게 아래와 같은 흐름으로 가자.
1. 메뉴화면에서 start 누르면 인트로 없이 게임이 시작되며 루프 돌입
2. 가챠타임이 오고 가진 자원만큼 가챠를 돌려 리스트가 쭉 나온다. 원하는 캐릭터를 선택하면 자동으로 배치(스테이지만큼의 캐릭터 보유. 1스테이지엔 한 명, 2스테이지엔 두 명 같이.)되고 스테이지 시작
3. 스테이지를 계산해 적정 수준의 몹(스테이지 수만큼)이 등장한다.
4. 그냥 클릭하면 8bit 노이즈와 함께 바로 전투 결과가 바로 나온다. (log 확인 가능)
5. 몹을 쓰러뜨리면 아이템이 세 개 출현하며 이 중 하나를 선택할 수 있다. (선택 가능 수나 루팅 수는 봐가면서 수정)
6. 다음으론 어려운 길, 중간 길, 쉬운 길을 선택할 수 있다. 아이템의 등급은 1~4가 있는 것으로 가정. 어려운 길에서는 확정으로 3등급 이상 아이템이 하나 출현한다. 중간 길에선 보너스 가챠포인트를 준다. 얼추 두 번 진입에 단챠 한 번 정도로. 쉬운 길은 획득 가챠포인트가 줄어들고 2등급 이하 아이템만 출현하는 대신 확정적으로 회복아이템이 나온다.
7. 스테이지에 지정된 횟수를 반복하면 루프 처음의 가챠타임으로.

+ 이런 기획은 보통 게임 자체는 더럽게 재미없기때문에 상황설정으로 상상력을 불어넣어줘야한다. 집중력을 높이는데 좋은건 가챠의 재미를 올려줄 캐릭터, 단지 스텟만 올려주는게 아니라 그럴싸한 설정이 붙은 아이템, 적 몬스터들의 통일된 분위기 등이다. 우린 텍스트로만 만들거니까 뭔가 상상력을 자극하는 문장으로 작명과 설명을 써넣는 것으로 이를 구현한다.... 였는데. 뭔가 기획이 커지고 있다.

## 러프한 구현 이야기
#### framework
+ 각각의 scene을 관리하는 컨트롤러를 둔다. 직관적인 이름이면서도 scene만 관리할 것 같고 그러면서도 가장 상위일 것 같은 이름을 지어야하는데.... 일단 scene controller로 할까.
+ 각 scene는 독자적 루프를 가지며 scene 전환은 call scene method를 통해 이루어진다.
+ scene의 전환에 사용할건 처음써보지만 vue router로... 해볼까. 생각좀 해보자.
+ Scene의 종류와 간략한 기능은 우선 아래와 같음.
    * MainMenu : Clear 또는 Game Over시 여기로 돌아옴. 있는건 Start 버튼 단 하나... 도 아니다. 우리 컨셉질에 충실하게 터치 투 스타트로 가자. 후에 추가된 기획으로 인해 상단에 옵션버튼 추가.
    * Intro Scene : 텍스트가 페이드인 한다. 
    * 가챠 Scene : 가진 자원으로 가챠를 돌림. 가챠 결과에서 원하는 캐릭터를 선택.
    * 전투 Scene : 시작시 적이 나옴. 첫 클릭으로 전투 결과를 로그로 보여줌. 생존시 전투결과를 클릭하면 드랍 아이템이 나오며 아이템 하나 선택(밸런싱적인 부분들 구체적으로 잡히면 조금 수정). 장착할 캐릭터 선택. 완료 후 클릭하면 길 선택(러프한 다음 이벤트 정보 표시). 
    * 이벤트 Scene : 중간길이 이벤트로 대체됐고 유저가 중간길을 골랐을 시 등장. 이벤트 정보를 출력하는 텍스트 창(한 글자씩 초당 30글자 출력 및 클릭으로 한 번에 전체 텍스트 표시)과 선택지가 출력된다.
    * Clear Scene : 게임 클리어 시 출력. Clear 이펙트는 보스 막타시 3초에 걸쳐 게임 화면이 하얀색으로 페이드아웃. 이후 줄 단위 페이드인 하는 텍스트로 짧게 클리거 이후의 상황 나오고 거기서 클릭하면 화면 정 중앙에 Clear! 출력. 클릭 후 다음 화면으로 진행. 1초에 하나씩 클리어 결과들이 출력되고 그 화면에서 클릭하면 Thank you 나오고 끝? 해당 화면에서 클릭하면 메인 메뉴로.
    * Game Over : 게임 오버 시 출력. Game Over 이펙트는 마지막 전투에서 사망시 3초에 걸쳐 게임 화면이 검은색으로 페이드아웃. 이후 한 문장짜리 나름 의미심장해보이는 텍스트 출력 후 클릭하면 Game Over 뜨고 메인 메뉴로 돌아갈 수 있는 버튼 출력.
#### main menu roop
+ main menu는 show main menu라는 method로 부른다. 최초엔 window.onload에서 해당 메서드를 부르며 이후엔 main roop가 clear, 또는 gameover(중도 포기도 gameover)를 인식했을 시 호출한다.
+ Start 버튼만 있으면 됨. 세이브도 없을거고 웹이라 닫을땐 닫기 누르는게 가장 깔끔하거든.... 소리도 안나니 옵션도 필요 없고.

#### main roop
+ 게임 전체를 관리하는 roop에선 각 roop를 호출하고 결과를 받는다.
+ 데이터 모델은 따로 두고 각 roop가 데이터에 직접 개입하는걸로 하자.

#### game frame
+ 언제든지 중도 포기 가능하도록 상단 바에 포기 버튼을 둔다. 컨셉질에 충실하게 버튼 이름은 리세마라. 테스트해서 성능 이슈가 없다면 상단에 Bar를 두고 Vue router로 전투 Scene, 가챠 Scene, 이벤트 Scene을 표현한다.
+ 추가로 텍스트 모드와 게임 모드를 전환하는 버튼도 하나 두자. 진행하다보니 뭔가 꿈이 커지며 당초의 목적을 잊기 시작했다. 그래도 반드시 아무런 CSS 이펙트조차 없는 텍스트 온리(거의 CMD 어드벤쳐? MUD급) 모드는 만드는걸로.

#### 가챠 Scene
+ 입장시 픽업 안내 출력.
+ 기본 화면에는 버튼은 단챠, 5연챠, 진행 버튼 존재. 추가로 현재 선택된 픽을 아이콘으로 출력.
+ 가챠 화면에선 5개의 슬롯에 각각의 캐릭터가 스탠드 이미지로 출력. 슬롯에는 선택 버튼이 있음. 하단에는 현재 선택된 캐릭터 출력. 선택된 캐릭터가 있는 상태에서 다른 캐릭터를 선택하면 변경하시겠습니까? 팝업이 출력. 선택된 캐릭터 없이는 최초 가챠화면으로 돌아가기 위한 다음 버튼이 활성화되지 않는다.
+ 가챠 이펙트는 CSS 공부해보고 재밌게 넣을 수 있음 넣어보자. 좌측부터 순서대로 커튼이 위로 젖혀지는데 등급에 따라 커튼 색이 다르다거나. 근데 이건 커튼 깔끔하게 원하는 위치에서 사라지려면 캔버스 들어가지 않냐 구현에. 일단 봐가면서.

## 조금 더 디테일한 기획
#### 캐릭터
+ **등급** : 대세에 맞게 노말, 레어, SR의 세 등급으로 나눈다. 노말은 무난하고, 레어는 노말보다 살짝 성능이 좋다는 느낌이며 SR은 포지션이 확고하게.
+ **직업군** : 3등급 이상 아이템 파밍 노리고 하드만 달리는 유저들을 막기 위해 아이템군을 직업(비스무리한 것. 이건 시놉시스에 따라 달라진다)으로 나눈다. 즉 자기 직업 템만 낄 수 있다. 템파밍을 확실히 견제하면서도 꼬이지 않기 위한 종류 수는 감으로는 5. 봐가면서 수정.
+ **포지션** : 서는 순서는.... 이거도 고민 포인트다. 약간 다키스트 던전같은 느낌의 전투를 원하는데.... 라기보단 다키스트 던전 짭이지. 유저가 스킬 뭐 쓸지 못 고르는 다키스트 던전이요.... 다만 닼던을 보면 UI상 이쁘게 설 수 있는게 최대 4명까지인 것 같은데. 우리는 5명 세울 방법을 고민해야됨.
+ **기본 스텟** : HP, ATK, SPD, GD. 정도로 우선 해볼까.
+ **현재 스텟** : HP를 제외하고는 전투 시작시 기본 스텟을 복사해서 가져온 뒤 아이템 스텟을 더하기 빼기로 적용해 시작값을 정한다. 이후 전투가 진행되며 받은 효과에 따라 유동적으로 변한다. 버프 디버프로 인해 다음 전투까지 이어지는 스텟 변동은 없다. HP는 남아있는 HP로 표기.
+ **아이템 슬롯** : 이 부분은 던전 오브 엔들리스를 따라한다. 다만 설계상 템 루팅이 잦으니 장착 가능한 아이템 수는 1 더해서 3~4개로. 추가로 아래 설명할 스킬풀 시스템으로 인해 종류는 무기, 방어구, 장신구에 추가적으로 스킬획득이 있.. 으면 좋을 것 같다. 유저가 특정 캐릭터에게 템을 몰아주는 전략을 취하지 않았단 전제하에, 한 스테이지에 캐릭터 하나가 **그럭저럭** 템세팅이 완료되는 게 이상적이다.
+ **스킬 풀** : 모든 캐릭터는 스킬 풀에 지정된 순서로 액션을 취하며 다음 취할 액션이 무엇인지는 한 스테이지동안 유지된다. 스테이지가 넘어가면 다음 취할 액션은 초기화된다. 액션풀 스택은 언제든지 추가, 삭제, 특정 위치로 이동이 가능하도록 설계해야한다. 그래야 스턴도 먹이고 필살기 즉발이나 아이템을 통한 추가 스킬 획득 등도 구현할 수 있다. 그리고 깊게 생각할 부분으론 플레이어가 전투의 컨트롤에 개입할 수 있는 유일한 부분이 여기라는 것.... 개입의 방법은 조금 고민해봐야할까. 가급적 게임을 진행하는 Scene에 조작관련 UI를 모두 넣는게 좋지만 스킬풀 조작법에 따라서는 Scene이 좀 더 늘어날 수도 있다.

#### 전투
+ SPD 순서대로 현재 자신의 스킬풀에 있는 스킬중 가장 앞쪽에 있는 스킬을 사용하며 로그를 남겨 진행.

#### 아이템
+ 기본적으로 캐릭터의 스텟 및 스킬 풀, 혹은 파티 전체의 부가효과에 관여한다.
    * **장착 아이템** : 다시 무기, 방어구, 보조, 스킬 추가로 나뉜다. 저 등급 아이템의 의미를 부여하기 위해... 뭔가 수단을 좀 취해보자. 엔들리스에서 느끼던 문제인데 똥템은 집는 입장에서도 재미도 없고 감동도 없으며 나중가선 하등 쓸모도 없다.
        + 무기 : 심플하게 공격력 상승 및 공격 패시브.
        + 방어구 : 심플하게 HP 상승 및 방어 패시브.
        + 보조 : 패시브 스킬 추가.
        + 스킬 추가 : 보조에 들어갈 법 하지만 캐릭터의 컨셉질을 위해, 그리고 밸런싱을 위해 별도 부위로 둔다.
    * **소비 아이템** : 사실상 회복 아이템이 전부인걸로. 디버프 해제 등은 장기적 디버프가 없을거라 없다. 플레이어의 의지로 방지할 수 없는 장기적 디버프는 죽으면 끝인 로그라이크에선 짜증만을 부른다. 소비성 스킬 추가도 고려는 해보는데... 운용 난이도 상승 및 벨런싱 문제로 안넣는게 나을 듯.
    * **전체 버프 아이템** : 전체 캐릭터의 스텟을 소소하게 올린다. 후반부에 합류한 캐릭터가 노템과 상승한 스테이지 수준으로 인해 바로 넉다운되지 않도록 생각한건데 고려할 게 좀 많은 요소인듯.

#### 스킬
+ 데미지 표시를 할 지 말지를 정하기 위해서 설계부터 Attack 타입과 Active 타입으로 나눌까 생각했지. 근데 모든 스킬이 의미있어보이려면 어떤 스킬이든 기본데미지가 소소하게나마 있는게 낫지 않을까 싶거든. 일단 견제기를 위해 타입은 나누되 스킬은 전부 데미지는 있게 해보자. 프로토타입을 만들어서 해보고 좀 더 생각하죠..
+ 위와 같은 사항을 고려한다면 들어갈 내용은
    * **DMG** : 캐릭터 ATK에 곱해지는 형식으로.
    * **부가효과** : function으로 구현할라고.... 하는데 말입니다.
    * **계통** : 단순 공격, 버프, 디버프. 두 개로 우선 하자.
    
#### 이벤트
+ 모든 스테이지는 중간과 최 후반에 부활을 포함하는 회복 이벤트가 반드시 있다. 해당 이벤트는 선택사항이 아니라 필수이기에 갈레길이 출현하지 않도록 할까 생각중. 효율은 고민 좀 해봐야... 

#### 스테이지 설계
+ 가챠게임 모티브니까 가챠게임들의 컨텐츠를 모방하는 식으로 플레이어가 다음 스테이지 환경을 고르는 것도 재밌을 듯. pvp라거나, 이벤트 던전이라거나, 스토리 던전 등등. 콘셉트가 이렇다면 여력에 따라선 스테이지 선택으로 나오는 몹 종류 바뀌는 수준을 넘어서는 환경변화가 있을지도. 
+ 스테이지 길이는 얼추... 마지막 합류 캐릭터의 파밍까지 고려하면 10 12 14 16 18 체계가 적당하지 싶은데. 전투도 클릭 한 번으로 끝나니 좀 길다고 런타임이 원래의 콘셉트인 10분을 오버할 것 같지도 않고.
+ 보스는 있는게 좋으려나. 클릭 한 번으로 전투가 끝나기로 했지만 보스전만은 연출을 위해서 한 턴 단위로 턴 돌아가는걸 보여줄까 싶다. 그렇게 하더라도 보스의 어려움같은걸 느끼기엔 시스템이 영 아니니.. 플레이어에게 보스전의 부담을 주기 위해선 보스전의 타격은 운용에 따라 회복 가능하되 누적되는 형태가 좋겠다. 스테이지 클리어 후 회복량에 따라 달라지겠지.

#### 시스템적 콘셉트
+ 기왕 가챠게임인거 랜덤으로 픽업 찬스도 있는걸로. 이 픽업은 그냥 소소한 이벤트성인걸로 할 지 아니면 통제 가능한 운 요소로 할 지, 스테이지 업에 따른 보너스도 있을지 등도 관건. 일단 가챠포인트로 최소한의 가챠만 하고 나머지는 킵할 수 있게 하자. 스테이지당 최소 가챠회수는 5연챠. R 이상 하나 출현 확정이다. 던전 1칸 진행당 2포인트씩 포인트 주고 10포인트로 5연챠.
+ 아이콘... 이쁘게 만들 수 있는지는 재껴두고 캐릭터 전신 이미지는 스탠드, 공격, 승리, 다운 필요. 로그용 아이콘은 공격, 피격, 다운 필요... 아니 근데 텍스트 어드벤쳐도 아니잖아 이래버리면. 근데 그러고싶어. 텍스트 모드로 진행할지 게임모드로 진행할지 선택이라도 가능하게 해볼까. 이래버리면 최고등급인 SR은 가챠 등장 일러스트도 넣고싶은데 거기까진 꿈이 너무 크다....
+ **짚고 넘어갈 게** 이 내용들을 그림없이 텍스트로만 직관적으로 알아보게 하려면 대체 UI 디자인 능력이 얼마나 좋아야되는거야? 물론 애초에 능력 좋은 사람은 텍스트로 이런걸 시도하지 않는다. 멍청하니까 적제적소를 몰라서 텍스트로 이런걸 만들 생각을 하지. 아니 멍청하니까 텍스트로 만들어야한다는 제약을 두고도 이런 기획을 하고있는게 아닐까? 아무튼.... 그래도 일단 해볼래. 짜피 취미로 하는건데...


## 조금 더 디테일한 구현 이야기
#### Player Inputs
+ MainMenu
    * Start Button Click
    * 옵션에서 게임 모드 채크 (디폴트는 텍스트)
+ Intro
    * 진행 버튼
+ 

## 시놉시스
+ 여기까지 구현계획이 잡혔으니 이제서야 이야기할 수 있는 그래서 시놉시스는 무엇인가... 게임 진행방식이 납득이 가되 흥미롭고 멋있고 막 설레고 그래야함.
+ 이건 좀 더 고민하기로.

## 작업 로그
+ 우선 잘 모르겠으니 vue cli 기본 pkg 구조는 놔두고 그 안에 하위 pkg들을 만들어서 작업하자. 
+ MainMenu.vue 생성. 우선은 Start Button으로 구현. 후에 옵션 버튼 위에 놓고 tuch to start 식으로 변경해야지.
+ Game에 사용되는 컴포넌트들만을 모을 예정인 Game PKG 생성. 이후 Scene에 따라 Battle, Event, Gacha Scene PKG를 만들었으며 각 장면에서 사용하는 컴포넌트는 전부 거기 정의할 것.
+ 게임 진행에 관여하는 Frame PKG를 만들고 GameControllFrame.vue 생성했는데....
+ Frame의 전환은 Vue Router로 관리해야 할 것 같음. Game Controller는 Vue Router에 신호를 주기 위한 상위 컴포넌트로 활약시킬까 했는데... 구조적으로 부모한테 emit하는거고 bus 타면 좀 더 딜레이가 생기지 싶어서 GameController를 Router로 정의하기로 결정. 그렇게 되면 Scene Change에만 관여하고 게임 핵심 루프에는 관여하지 않게되니 이름은 SceneControllFrame로 변경하는게 맞다.
+ 아니지 근데... Game Data를 받아둬야하는 객체가 컴포넌트로 있어야하는 것도 맞긴 함. 근데 난 그게 단순 display none 객체 말고 그래도 화면에 있는 무언가인 편이 낫다고... 우선 생각은 함. 이건 어느정도 구현된 상태에서 성능비교를 해봐야 할 듯.
+ Router를 보니까.... 뭔가 진짜 라우팅 경로만 가진 객체같다. 스스로 라우팅 조건을 가지고있다거나 라우팅할지 판단하는 객체라기보다는...
+ router-view에 router를 넣어주고, router-view를 가진 객체에서 라우팅 여부를 판단한다. 그리고 중요한건 그 객체를 마운트 시키는 방법인데.
+ 때려치고 그냥 app을 라우터로 두자. start menu도 결국 scene중 하나니까 scene controller는 menu도 관리하는걸로.... 원래의 game controller 개념 도입하려고 game 실행에만 관여시키려 그러다가 피봤다.
+ 까다롭네... 그러면 우선.... 이 아니라.
+ 잠만 이거 emit 안되고 scene 무조건 bus타야되는데?
+ ......... 라우터 포기. 그래 내가 생각했던건 처음부터 그냥 display none 말고는 방법이 없었던 것 같다.
+ 우선 Gacha scene 레이아웃을 따보자. Flex로다 말이지.

## 참고할 자료들
+ css에서 버튼 위치 absolute로 잡기 - https://stackoverflow.com/questions/18640503/how-to-position-the-button-exactly-in-css
+ webpack으로 구현하는 vue 프로젝트를 위한 BoilerPlate. vue cli 쓸 거지만 참고할 부분도 있지 않을까. - https://github.com/yamoo9/vue-simple
+ 이건 우리랑은 상관없겠다만 규모가 큰 프로젝트용 Boilerplate - https://github.com/yamoo9/vue-full/blob/master/docs/README.md
+ Flex로 레이아웃을 만들어보자. - https://poiemaweb.com/css3-flexbox